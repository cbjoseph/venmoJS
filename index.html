<!DOCTYPE html>
<html>
  <head>
  <script src="https://js.braintreegateway.com/web/3.26.0/js/client.min.js"></script>
  <script src="https://js.braintreegateway.com/web/3.26.0/js/venmo.min.js"></script>
  <script src="https://js.braintreegateway.com/web/3.26.0/js/data-collector.min.js"></script>
    <meta charset="UTF-8">
    <title>title</title>
  </head>
  <body>
  <style>
    #venmo-button {
      -webkit-appearance:none;
      border:none;
    }
  </style>
  <button id="venmo-button"  display="none"><img src="https://i.imgur.com/foeojP0.png"></button>
  <script>

  var venmoButton = document.getElementById('venmo-button');

// Create a client.
braintree.client.create({
  authorization: "eyJ2ZXJzaW9uIjoyLCJhdXRob3JpemF0aW9uRmluZ2VycHJpbnQiOiIxMDdkNzU0YWIzYzNjM2Y2Yjk4ZTVhNWNhOTRmN2I4ODMyYThhNzVjZGQ2OTkyYjZhMmFhNjNiN2YwNzU4ZjIyfGNyZWF0ZWRfYXQ9MjAxNy0xMi0xMlQxNDo0NjozMi4zMzAxNDMxNDIrMDAwMFx1MDAyNm1lcmNoYW50X2lkPXFoY3Bud2t4ZHR0cnk5a2hcdTAwMjZwdWJsaWNfa2V5PWdzcXY4cnpqZGJjZjl0cXciLCJjb25maWdVcmwiOiJodHRwczovL2FwaS5zYW5kYm94LmJyYWludHJlZWdhdGV3YXkuY29tOjQ0My9tZXJjaGFudHMvcWhjcG53a3hkdHRyeTlraC9jbGllbnRfYXBpL3YxL2NvbmZpZ3VyYXRpb24iLCJjaGFsbGVuZ2VzIjpbXSwiZW52aXJvbm1lbnQiOiJzYW5kYm94IiwiY2xpZW50QXBpVXJsIjoiaHR0cHM6Ly9hcGkuc2FuZGJveC5icmFpbnRyZWVnYXRld2F5LmNvbTo0NDMvbWVyY2hhbnRzL3FoY3Bud2t4ZHR0cnk5a2gvY2xpZW50X2FwaSIsImFzc2V0c1VybCI6Imh0dHBzOi8vYXNzZXRzLmJyYWludHJlZWdhdGV3YXkuY29tIiwiYXV0aFVybCI6Imh0dHBzOi8vYXV0aC52ZW5tby5zYW5kYm94LmJyYWludHJlZWdhdGV3YXkuY29tIiwiYW5hbHl0aWNzIjp7InVybCI6Imh0dHBzOi8vY2xpZW50LWFuYWx5dGljcy5zYW5kYm94LmJyYWludHJlZWdhdGV3YXkuY29tL3FoY3Bud2t4ZHR0cnk5a2gifSwidGhyZWVEU2VjdXJlRW5hYmxlZCI6dHJ1ZSwicGF5cGFsRW5hYmxlZCI6dHJ1ZSwicGF5cGFsIjp7ImRpc3BsYXlOYW1lIjoiUGluayBTa2lubnkgQmVlciIsImNsaWVudElkIjoiQVJWOHlYRmpxOFRJR293aFdQeEk5OEhqdG1Ec2tFR25EZkt5X290MGhQRmxWX0ZIcHJyZDNvMTN4VXJKUXkzQUJ3TnVzQVZJNFJhYWlPeHoiLCJwcml2YWN5VXJsIjoiaHR0cDovL2V4YW1wbGUuY29tL3BwIiwidXNlckFncmVlbWVudFVybCI6Imh0dHA6Ly9leGFtcGxlLmNvbS90b3MiLCJiYXNlVXJsIjoiaHR0cHM6Ly9hc3NldHMuYnJhaW50cmVlZ2F0ZXdheS5jb20iLCJhc3NldHNVcmwiOiJodHRwczovL2NoZWNrb3V0LnBheXBhbC5jb20iLCJkaXJlY3RCYXNlVXJsIjpudWxsLCJhbGxvd0h0dHAiOnRydWUsImVudmlyb25tZW50Tm9OZXR3b3JrIjpmYWxzZSwiZW52aXJvbm1lbnQiOiJvZmZsaW5lIiwidW52ZXR0ZWRNZXJjaGFudCI6ZmFsc2UsImJyYWludHJlZUNsaWVudElkIjoibWFzdGVyY2xpZW50MyIsImJpbGxpbmdBZ3JlZW1lbnRzRW5hYmxlZCI6dHJ1ZSwibWVyY2hhbnRBY2NvdW50SWQiOiJwaW5rc2tpbm55YmVlciIsImN1cnJlbmN5SXNvQ29kZSI6IlVTRCJ9LCJtZXJjaGFudElkIjoicWhjcG53a3hkdHRyeTlraCIsInZlbm1vIjoib2ZmIn0="
}, function (clientErr, clientInstance) {
  // Stop if there was a problem creating the client.
  // This could happen if there is a network error or if the authorization
  // is invalid.
  if (clientErr) {
    console.error('Error creating client:', clientErr);
    return;
  }

  braintree.dataCollector.create({
    client: clientInstance,
    paypal: true
  }, function (dataCollectorErr, dataCollectorInstance) {
    if (dataCollectorErr) {
      // Handle error in creation of data collector.
      return;
    }

    // At this point, you should access the deviceData value and provide it
    // to your server, e.g. by injecting it into your form as a hidden input.
    console.log('Got device data:', dataCollectorInstance.deviceData);
  });

  braintree.venmo.create({
    client: clientInstance,
    // Add allowNewBrowserTab: false if your checkout page does not support
    // relaunching in a new tab when returning from the Venmo app. This can
    // be omitted otherwise.
    allowNewBrowserTab: false
  }, function (venmoErr, venmoInstance) {
    if (venmoErr) {
      console.error('Error creating Venmo:', venmoErr);
      return;
    }

    // Verify browser support before proceeding.
    if (!venmoInstance.isBrowserSupported()) {
      console.log('Browser does not support Venmo');
      // displayVenmoButton(venmoInstance);
      return;
    }

    displayVenmoButton(venmoInstance);

    // Check if tokenization results already exist. This occurs when your
    // checkout page is relaunched in a new tab. This step can be omitted
    // if allowNewBrowserTab is false.
//     if (venmoInstance.hasTokenizationResult()) {
//       venmoInstance.tokenize(function (tokenizeErr, payload) {
//         if (err) {
//           handleVenmoError(tokenizeErr);
//         } else {
//           handleVenmoSuccess(payload);
//         }
//       });
//       return;
//     }
//   });
// });

function displayVenmoButton(venmoInstance) {
  // Assumes that venmoButton is initially display: none.
  venmoButton.style.display = 'block';

  venmoButton.addEventListener('click', function () {
    venmoButton.disabled = true;

    venmoInstance.tokenize(function (tokenizeErr, payload) {
      venmoButton.removeAttribute('disabled');

      if (tokenizeErr) {
        handleVenmoError(tokenizeErr);
      } else {
        handleVenmoSuccess(payload);

      }
    });
  });
}

function handleVenmoError(err) {
  if (err.code === 'VENMO_CANCELED') {
    console.log('App is not available or user aborted payment flow');
  } else if (err.code === 'VENMO_APP_CANCELED') {
    console.log('User canceled payment flow');
  } else {
    console.error('An error occurred:', err.message);
  }
}

function handleVenmoSuccess(payload) {
  // Send the payment method nonce to your server, e.g. by injecting
  // it into your form as a hidden input.
  console.log('Got a payment method nonce:', payload.nonce);
  alert(payload.nonce);
  // Display the Venmo username in your checkout UI.
  console.log('Venmo user:', payload.details.username);
}
// Create a client.
</script>
  </body>
</html>